<!DOCTYPE html>
<html lang="en">
<head>
  <title>D-Link DIR-825 (rev.B1) throughput test</title>
  <meta name="description" content="Orange Sun | Posts | Vitaly Potyarkin | 2022-01-31">
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="origin">
  <meta name="generator" content="Pelican">
  <link href="https://potyarkin.ml/posts/2022/d-link-dir-825-revb1-throughput-test/" rel="canonical">
<link href="https://potyarkin.ml/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Orange Sun Full Atom Feed" />
<link href="https://potyarkin.ml/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Orange Sun Full RSS Feed" />
  <link href="https://potyarkin.ml/theme/css/style.css?cache=ce1ce9e802f6452fc24c45dcd14f219b9fdbc4b78394fcb3ed490c23f88a6851" type="text/css" rel="stylesheet">
  <link href="https://potyarkin.ml/theme/css/fonts.css?cache=32c843bb3ce96eb9fb92f48c7a63dc133ab32e0d267a2e1453199c23403d5cd0" type="text/css" rel="stylesheet">
  <link href="https://potyarkin.ml/theme/css/codecolor/bleak.css?cache=4793611eaa86c9638927c57ac8d9995c5f7ca18d9ffed3721467cf3ef61b5e8e" type="text/css" rel="stylesheet">
    <link href="https://potyarkin.ml/static/custom.css?cache=14eb0e25d39bc89f6d5629a3a1b38f64012dd473d0d9744e588af759fa4534a5" type="text/css" rel="stylesheet">
  <style>
  :root {
    --accent-hue: 14.917127071823206;
    --accent-saturation: 87.43961352657004%;
    --accent-lightness: 59.411764705882355%;
    --accent-rgb: #f26a3d;
  }
  </style>
  <meta name="theme-color" content="#f26a3d">
</head>
<body class="pelican-article">
<nav id="menu">
  <a href="#" class="close button">Close</a>
  <a href="#menu" class="open button">Menu</a>
  <ul class="menu-list">
      <li><a href="/archive/">Archive</a></li>
      <li><a href="/tags/">Tags</a></li>
      <li><a href="mailto:sio.wtf@gmail.com">Email</a></li>
      <li><a href="https://github.com/sio">Github</a></li>
      <li><a href="/feeds/">feed</a></li>
      <li><a href="/bookmarks/">bookmarks</a></li>
      <li><a href="https://potyarkin.ml/blogroll/">Blogroll</a></li>
      <li><a href="https://potyarkin.ml/webring/">Webring</a></li>
  </ul>
</nav>  <header class="page-header">
    <h1>D-Link DIR-825 (rev.B1) throughput test</h1>
    <span class="subtitle"><a href="https://potyarkin.ml/">Orange Sun</a> |
<a href="https://potyarkin.ml/posts/">Posts</a> |   <a href="https://potyarkin.ml/">Vitaly Potyarkin</a>
| 2022-01-31
</span>
  </header>
<article class="full"><p>So, the year is 2022 and I'm still using D-Link <a href="https://openwrt.org/toh/d-link/dir-825">DIR-825</a>, rev.B1 as my edge
router at home.</p>
<p>Thanks to the power of opensource it is running a modern and secure OS
(OpenWRT) long after the manufacturer has abandoned this product.
Even though OpenWRT (and Linux in general) has increased the system
requirements, DIR-825 still meets the minimal <a href="https://openwrt.org/supported_devices/864_warning">8/64</a> criteria.</p>
<p><img alt="Photo of D-Link DIR-825, rev.B1" src="https://potyarkin.ml/resources/dir825/router.jpg"></p>
<p>To put things into perspective: I bought this very device in November, 2011
for the equivalent of $120. Its WiFi standard is pretty outdated (802.11n),
but that's enough since all my essential devices are hardwired.</p>
<p>Up until a few weeks ago it was pointless for me to think about router
upgrade. The Ethernet cable coming into my apartment from ISP equipment was
crimped to use only 2 twisted pairs which would never allow for speeds above
100Mbit. And DIR-825 routes 100Mbit just fine. Thankfully, a completely
unrelated incident occurred and an ISP technician was on site - I seized the
opportunity and asked them to recrimp their end (<em>4 missing wires were just
bent aside right before a connector, why would anyone do that?!</em>)</p>
<p>Now that I have an option to upgrade above 100Mbit, the valid question is:
<em>Will my DIR-825 be able to handle that?</em></p>
<p>To test router throughput I used two laptops booted into Debian 11 live image,
one of them running a DHCP server and connected to WAN port of the router, the
other one connected to one of LAN ports. I put together all the
required commands into a <a href="https://github.com/sio/router-throughput-test">Makefile</a> to avoid having to memorize them - you
might find this repo useful if you ever need to perform a similar test on
your router.</p>
<p>To establish a <a href="https://potyarkin.ml/resources/dir825/baseline.log">baseline</a> I connected the laptops directly to each other
without any routers or switches in between. I got the expected near-gigabit
speeds: 932Mbps down, 941Mbps up - nothing unusual here.</p>
<p>Here are the test results with router in between
(full logs: <a href="https://potyarkin.ml/resources/dir825/test1.log">part one</a>, <a href="https://potyarkin.ml/resources/dir825/test2.log">part two</a>)</p>
<p><img alt="average: bidir 130/162Mbps, down 262Mbps, up 382Mbps" src="https://potyarkin.ml/resources/dir825/results.svg"></p>
<p>Maximum throughput was achieved in upload tests (<em>382Mbps</em>). This is
probably explained by having to process less firewall rules for outgoing
traffic. Download speed even with a very basic iptables configuration was
significantly less (<em>256Mbps</em>), and bidirectional tests with
simultaneous traffic in both directions confirm that ~300Mbps is a hardware
limit (bidirectional speed was <em>130Mbps down + 162Mbps up =
292Mbps total</em>). top was showing 99% sirq load during these tests, but
running a monitoring tool did not have any significant impact on the results
(first 5 tests were executed before top was launched).</p>
<h2 id="conclusion"><a class="toclink" href="#conclusion">Conclusion</a></h2>
<p>These tests show that while DIR-825 is a perfectly capable router for 100Mbps,
it's completely out of its depth with faster connections. Even 300Mbps will
frequently become underutilized if the traffic will happen to flow in both
directions at once.</p>
<p>Looks like I finally need a new router after almost 11 years with DIR-825...</p></article>
<nav class="article-tags">
  <a href="https://potyarkin.ml/tags/hardware/">hardware</a>
  <a href="https://potyarkin.ml/tags/router/">router</a>
</nav>
<nav class="neighbors">
  <a class="neighbor neighbor-prev" href="https://potyarkin.ml/posts/2020/ansible-apt-debian-testing/">
    <h1>Ansible apt module fails to install python3-apt on Debian Testing</h1>
    <p>I have encountered an unexpected Ansible failure today that turned out to be not a...</p>
  </a>
  <a class="neighbor neighbor-next" href="https://potyarkin.ml/posts/2022/libvirt-cirrusci-workaround/">
    <h1>Unexpected workaround for Libvirt VMs with cgroups v2 in Cirrus CI</h1>
    <p>Today I wrote a commit message that was several screens long. I think it deserves to...</p>
  </a>
</nav>
<footer class="page-footer">
  <section class="credits">
        <span class="credits-left">
          Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a>
        </span>
        <span class="credits-center">
          <a href="https://potyarkin.ml/">Orange Sun</a>
        </span>
        <span class="credits-right">
          Theme <a href="https://github.com/sio/pelican-smallweb" rel="nofollow">SmallWeb</a>
        </span>
  </section>
</footer></body>
</html>